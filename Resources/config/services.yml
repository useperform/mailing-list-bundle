services:
    perform_mailing_list.admin.subscriber:
        class: Perform\MailingListBundle\Admin\SubscriberAdmin
        tags:
            - {name: perform_base.admin, entity: "PerformMailingListBundle:Subscriber"}

    perform_mailing_list.form.handler.subscriber:
        class: Perform\MailingListBundle\Form\Handler\SubscriberFormHandler
        arguments:
            - "@doctrine.orm.entity_manager"
            - "@logger"

    perform_mailing_list.menu.mailing_list:
        class: Perform\MailingListBundle\Menu\MailingListLinkProvider
        tags:
            - { name: perform_base.link_provider, alias: mailing_list }

    perform_mailing_list.twig.form:
        class: Perform\MailingListBundle\Twig\Extension\FormExtension
        arguments:
            - "@form.factory"
        tags:
            - {name: twig.extension}

    perform_mailing_list.panel.subscribers:
        class: Perform\MailingListBundle\Panel\SubscribersPanel
        arguments:
            - "@doctrine.orm.entity_manager"
            - "@templating"

    perform_mailing_list.connector.local:
        class: Perform\MailingListBundle\Connector\LocalConnector
        arguments:
            - "@doctrine.orm.entity_manager"

    perform_mailing_list.manager:
        class: Perform\MailingListBundle\SubscriberManager
        arguments:
            - "@doctrine.orm.entity_manager"
            - "@perform_mailing_list.connector.local"
        tags:
            - {name: kernel.event_listener, event: kernel.terminate, method: onKernelTerminate}
